<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // 获取当前URL信息
    const location = window.location;
    const path = location.pathname;
    const hostname = location.hostname;
    
    // Debug info
    console.log('404 redirect script running');
    console.log('Current URL:', location.href);
    console.log('Path:', path);
    console.log('Hostname:', hostname);
    
    // 检查是否是GitHub Pages域名或自定义域名
    const isGitHubPages = hostname.includes('github.io');
    const isCustomDomain = hostname === 'www.brulog.com' || hostname === 'brulog.com';
    
    // 确定基础路径前缀
    let basePath = '';
    
    if (isGitHubPages) {
      console.log('GitHub Pages detected');
      basePath = '/MyBlog';
    } else {
      console.log('Custom domain or local development detected');
    }
    
    console.log('Base path:', basePath);
    
    // 构建重定向URL - 将所有路径重定向到单页应用路由
    const redirectUrl = `${location.origin}${basePath}/#${path}`;
    
    console.log('Redirecting to:', redirectUrl);
    window.location.replace(redirectUrl);
  </script>
</head>
<body>
  <p>If you are not redirected automatically, follow this <a id="homeLink" href="/">link</a> to go to the homepage.</p>
  
  <script>
    // 更新链接地址以匹配正确的重定向路径
    document.getElementById('homeLink').href = window.location.origin + (isGitHubPages ? '/MyBlog' : '');
  </script>
</body>
</html> 